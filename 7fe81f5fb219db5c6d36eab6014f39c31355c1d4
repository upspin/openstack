{
  "comments": [
    {
      "key": {
        "uuid": "f29d1bc9_332f429c",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-11-13T05:57:35Z",
      "side": 1,
      "message": "Needs a copyright header, see existing files in the project for an example.",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a126d28_da7fc7d6",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 6196
      },
      "writtenOn": "2017-11-19T18:08:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f29d1bc9_332f429c",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c53536c4_1dfe7ced",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-11-13T05:57:35Z",
      "side": 1,
      "message": "I don\u0027t think this approach is appropriate here.\n\nThe upspin-setupstorage-openstack command (when it is created) should put storage credentials in serverconfig.json. Then \u0027upspin setupserver\u0027 pushes that configuration to the remote upspinsever, which can then use those credentials to initialize storage.\n\nEnvironment variables won\u0027t work in this case.",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8c31f55_a667a877",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 6196
      },
      "writtenOn": "2017-11-19T18:08:06Z",
      "side": 1,
      "message": "I\u0027m not sure why I used env vars in the first place. Having credentials in the systemd unit file or in the json config doesn\u0027t seem much different...\n\nNote though, that the server will now log the credentials during start-up, since they are now part of the options. (This does not only affect this flavour of the server, it would log the API key for the backblaze version, I think.)\n\n(I\u0027m now running the updated version.)",
      "parentUuid": "c53536c4_1dfe7ced",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbc23149_b6a79845",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-11-20T03:10:21Z",
      "side": 1,
      "message": "To fix the logging of credentials, you should update fmtStoreConfig in the upspinserver package:\n\nhttps://github.com/upspin/upspin/blob/master/serverutil/upspinserver/main.go#L174\n\nI think we need to update this for aws et al, too.",
      "parentUuid": "f8c31f55_a667a877",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87bab609_3ea5d2bb",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 6196
      },
      "writtenOn": "2017-11-21T08:28:30Z",
      "side": 1,
      "message": "Rather than add many prefixes to `fmtStoreConfig` I wish we could extend the filter to matching something like `^private[^\u003d]*\u003d` and change options keys in existing storage backends... also, should we log those as e.g. \"privateKey\u003d(hidden)\" so at least it\u0027s one can see that some value was specified? Doing so would break whoever\u0027s using non-AWS non-GCP servers because of the named options changes, at this point this could be only whoever developed those so could be acceptable? (AWS has no credentials in the config as those are in the EC2 instance IAM role I think.)\n\nIt feels wrong to tie `fmtStoreConfig` with all server impl\u0027s.\n\nPlease do not merge this CL until we agree on the naming and approach, so I put the right names...",
      "parentUuid": "cbc23149_b6a79845",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f4b5e9f_ffb2e3fd",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-11-22T01:40:43Z",
      "side": 1,
      "message": "We can\u0027t easily change the other names, because that would invalidate existing configurations. It\u0027s ugly, but creating a list of keys (or key substrings) that are forbidden from logging is sufficient IMO.",
      "parentUuid": "87bab609_3ea5d2bb",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b043317c_f3306660",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 6196
      },
      "writtenOn": "2017-11-22T22:35:03Z",
      "side": 1,
      "message": "Okay. I guess \"password\", along with \"private\", \"secret\" would be among those substrings. Hence I won\u0027t update this CL further (unless I get more feedback, of course). (I could follow up with the fmtStoreConfig change.)",
      "parentUuid": "1f4b5e9f_ffb2e3fd",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b7ae844_269aba52",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-11-22T22:40:38Z",
      "side": 1,
      "message": "\u003e (I could follow up with the fmtStoreConfig change.)\n\nPlease do.",
      "parentUuid": "b043317c_f3306660",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32506c7e_1c0f770c",
        "filename": "cloud/storage/openstack/openstack.go",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 6196
      },
      "writtenOn": "2017-11-23T00:32:17Z",
      "side": 1,
      "message": "I took a stab at it in CL 16580... and add private to what I want to hide here. Sorry for dragging this change on and on. Option names are very verbose, I guess I could remove \"openstack\" from them if you like, as that should be implied by \"backend\u003dOpenStack\".",
      "parentUuid": "7b7ae844_269aba52",
      "revId": "7fe81f5fb219db5c6d36eab6014f39c31355c1d4",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    }
  ]
}